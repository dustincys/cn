---
layout: post
category: 学术
title: 绝世好任务栏
matheq: no
comments: yes
tags: [fvwm, resolution, fvwmiconman]
share: yes
toc: no
---
FvwmPager有一个缺点是最小化的图标显示不清晰且被覆盖的窗口无法直观的显示。Windows
式任务栏虽然占据了垂直空间，但利用了显示器宽度大的特点可以显示窗口的内容。

<a class="fancybox" rel="gallery1"
href="http://wx4.sinaimg.cn/large/61dccbaaly1fj7qrjcou2j21400p01kx.jpg"
title="fvwm"><img
src="http://wx4.sinaimg.cn/large/61dccbaaly1fj7qrjcou2j21400p01kx.jpg" alt="fvwm" /></a>

为了方便Desk内的窗口进行整合，最佳的FvwmIconMan配置方案是设置两个任务栏，上下两
个任务栏，大小不同。大任务显示当前Desk中除了当前Page中的窗口，小任务栏显示当前
Page中的窗口。然而大任务栏的Resolution设置为Desk时，显示所有当前Desk的窗口。这时
两个窗口就重复了。没有配置办法，只好[修改源码](https://github.com/dustincys/fvwm/commit/a18eec7664bfb5759d8a33fdea0ce766dc0ac8a8)。

添加了任务栏之后再修改一些窗口重排的窗口大小的操作即可。小任务栏的鼠标行为是左键
选中窗口，并聚焦提升；中键图片式图标化；右键是如果窗口没有最大化则最大化聚焦提升
，如果最大化就直接聚焦提升，不缩小。

```fvwm
*FvwmIconMan-Windows-Top: Action Mouse 1 A SendCommand "FuncFlipWindow"
*FvwmIconMan-Windows-Top: Action Mouse 2 A SendCommand "MouseMiddleButtonBottomAction"
*FvwmIconMan-Windows-Top: Action Mouse 3 A SendCommand "MaximizeInEBSIconMan"
```

大任务栏的右键鼠标行为是将其他Page的窗口移动到当前窗口并聚焦提升。

```fvwm
*FvwmIconMan-Windows-Bottom: Action Mouse 1 A SendCommand "FuncFlipWindow"
*FvwmIconMan-Windows-Bottom: Action Mouse 3 A SendCommand "MoveToDeskAndPageIM"
```

对应的函数：

```fvwm
DestroyFunc FuncFlipWindow
AddToFunc FuncFlipWindow
+ I FlipFocus
+ I Raise

DestroyFunc MouseMiddleButtonBottomAction
AddToFunc MouseMiddleButtonBottomAction
+ I Silent Thumbnail

DestroyFunc MaximizeInEBSIconMan
AddToFunc MaximizeInEBSIconMan
+ I ThisWindow (Maximized) FuncFlipWindow
+ I TestRc (!Match) Maximize 100 -61p
+ I TestRc (!Match) FlipFocus
+ I TestRc (!Match) Raise
+ I TestRc (!Match) Move 50-50w 50-50w

DestroyFunc MoveToDeskAndPageIM
AddToFunc MoveToDeskAndPageIM
+ I MoveToDesk
+ I MoveToPage
+ I Raise
```

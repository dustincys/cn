---
layout: post
category: 学术
title: 当系统设置成鼠标自动聚焦会出现的bug
matheq: no
comments: yes
tags: [输入法, 逻辑bug, mousefocus]
share: yes
toc: no
---

洒家电脑喜欢两种方式：

- 鼠标进入到窗口即自动聚焦到该窗口
- 当不用鼠标而用键盘的时候，隐藏鼠标

但这样与拼音输入法在逻辑上会出现bug，因为，拼音输入法有一个功能是当输入拼音，但没有按空格之类的按键时候，窗口切换导致焦点变换，这时候拼音自动输入了错误的汉字或者直接省略。
这样当洒家输入汉字时候，隐藏的鼠标与拼音候选窗口以及目标输入窗口之间出现重合时候就发生了以上bug。
由于洒家隐藏了鼠标，所以好长一段时间以为是Fcitx出问题，后来用ibus也有这个现象，然后觉得是gtk出了问题。
直到最近发现当某些特定窗口弹出新窗口时候，也发生焦点丢失，才最后确定问题的所在。

解决方法是，将鼠标移动到窗口角落，这样绝对不会出现窗口重合现象。
或者是不用鼠标自动聚焦。

> 2018-10-29 修改，只要设置如下代码，即可使终端不自动获取聚焦。

	Style gnome-terminal SloppyFocus, Lenience
